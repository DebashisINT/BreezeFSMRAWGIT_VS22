@*====================================================== Revision History ===================================================*@
@*Rev Number         DATE              VERSION          DEVELOPER           CHANGES*@
@*1.0                30-04-2024        V2.0.42          Sanchita            0027420: MICRO LEARNING CONFIGURATION Issue # Demo Portal *@
@*====================================================== Revision History ===================================================*@

@{
    ViewBag.Title = "Document List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Upload Video</title>
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">*@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.css">
    <link href="~/assests/pluggins/LightBox/lightbox.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.rtl.css" integrity="sha512-ESMNMKMBWQP7MhGIc/vk75n2qBzCfLhP8q4Ww43m+hhQeUn+aiPCYWV1eyP1uZ7tWda8VtZypCZavihltM+xhw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/themes/default.rtl.css" integrity="sha512-gi53xi6INSr6sseLKtDMLqAnFouz6jZhAYCLohIRyui0wV53yPWk9mP4oAEA26x12BV0Pvf59La9jS5nXwChiw==" crossorigin="anonymous" />
    @*<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>*@
    @*<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>*@
    <script src="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/alertify.min.js"></script>
    <script src="~/assests/pluggins/LightBox/lightbox.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

    @*<script type="text/javascript" src="~/assests/pluggins/multiSearchable/mock.js"></script>
        <link href="~/assests/pluggins/multiSearchable/jquery.dropdown.min.css" rel="stylesheet" />
        <script src="~/assests/pluggins/multiSearchable/jquery.dropdown.min.js"></script>*@
    <style type="text/css">
        .video-frame {
            width: 100%;
            height: 195px;
            border: 4px solid #f7f7f7;
            box-shadow: 1px 2px 3px rgb(64 64 64 / 40%);
            border-radius: 3px;
            position: relative;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .title {
            font-weight: 500;
            font-size: 14px;
            text-align: center;
            margin-bottom: 10px;
            margin-top: 10px;
            background-color: #57aadc;
            color: white;
            /* box-shadow: 1px 2px 4px rgb(72 72 72 / 40%); */
            border-radius: 3px;
            padding: 1px 5px;
        }

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        .butHolder {
            position: absolute;
            right: 20px;
            top: 15px;
            display: inline-block;
            background: rgb(230 230 230);
            padding: 4px 10px;
            border-radius: 19px;
            box-shadow: 0px 2px 5px rgb(58 57 57 / 23%);
            transition: all 0.25s ease-in;
            -webkit-transition: all 0.25s ease-in;
            opacity: 0;
            -webkit-transform: translateY(-100px);
            transform: translateY(-100px);
            z-index: 999;
        }

        .video-frame:hover .butHolder {
            transform: translateY(0);
            opacity: 1;
        }

        .butHolder > i, .butHolder > span {
            margin-right: 8px;
            cursor: pointer !important;
        }

            .butHolder > i:hover {
                color: #57aadc;
            }

            .butHolder > span > img {
                max-width: 18px;
            }

        .fileinput-upload {
            display: none !important;
        }
    </style>
    <script src="~/assests/pluggins/multiSearchable/mock.js"></script>
    <script>

        $(function () {
            if ('@ViewBag.result' != '') {
                alertify.set('notifier', 'position', 'bottom-left');

                if ('@ViewBag.result' == 'File uyploaded successfully.' || '@ViewBag.result' == 'Updated succsessfully.')
                    var notification = alertify.notify('File uyploaded successfully.', 'success', 5, function () { console.log('dismissed'); });
                else
                    var notification = alertify.error('@ViewBag.result');

            }

        })


        function editNode(id, FilePath, FilePathIcon, FileDescription,isactive) {
            $("#hdnAddEdit").val(id);
            $("#FileDescription").val(FileDescription);

            FilePathIcon = window.location.origin + FilePathIcon;

            var arr = [];

            if (isactive == 'True')
            {
                $("#Active").prop("checked", true);
            }
            else
            {
                // Rev 1.0
                //$("#Active").prop("checked", true);
                $("#Active").prop("checked", false);
                // End of Rev 1.0
            }



            var url = "<img src='" + FilePathIcon + "' class='file-preview-image' alt='Desert' title='Desert'>";
            arr.push(FilePathIcon);

            var arrPrev = [];
            var obj = {};
            obj.url=FilePathIcon;
            obj.key="1";
            arrPrev.push(obj);

            $("#fileuploadicon").fileinput({
                initialPreview: arr,
                initialPreviewAsData: true,
                initialPreviewConfig: arr,
                //initialPreviewConfig: arrPrev,
                overwriteInitial: false,
                append: true
            });




            $("#UploadVideo").modal('show');

        }

        function deleteNode(id, FilePath, FilePathIcon) {
            $.confirm({
                title: 'Delete tutorial?',
                content: 'This dialog will automatically trigger \'cancel\' in 8 seconds if you don\'t respond.',
                autoClose: 'cancel|8000',
                buttons: {
                    deleteUser: {
                        text: 'delete tutorial',
                        action: function () {
                            window.location.href = "@Url.Action("DeleteDoc", "DocumentSharing")" + "?id=" + id;
                        }
                    },
                    cancel: function () {
                        $.alert('action is canceled');
                    }
                }
            });
        }
        function addUserToNode(id, FilePath) {
            $("#hdnID").val(id);
            $("#usermapModal").modal('show');
            // gridUserList.Refresh();
            gridUserList.Refresh();

            var unselect = [];
            // gridUserList.SelectRowsByKey(unselect)
            gridUserList.UnselectRows();
            $.ajax({
                type: "POST",
                url: "@Url.Action("SetUsers", "DocumentSharing")",
                data: { ID: id },
                async: false,
                success: function (response) {
                    if (response.length > 0) {
                        setTimeout(function () { gridUserList.SelectRowsByKey(response); }, 1000);

                    }
                }
            });
        }

        function AddDocument() {
            $("#hdnAddEdit").val("");
            // Rev 1.0
            $("#Active").prop("checked", false);
            // End of Rev 1.0
        }

        function SaveUserDocGroup() {
            var id = $("#hdnID").val();
            gridUserList.GetSelectedFieldValues("user_id", function (str) {
                var selected = str.join(",");
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("SaveDocumentGroupUser", "DocumentSharing")",
                    data: { selected: selected, id: id },
                    success: function (response) {
                        if (parseInt(response) > 0) {
                            jAlert('Saved successfully.');
                            $("#DocGroupModal").modal('hide');
                            gridUserList.Refresh();
                        }
                        else if (parseInt(response) == -1)
                            jAlert('Code already exists.')
                    }
                });
            });
        }
        function beginUsergridcallback(s, e) {
            e.customArgs["id"] = $("#hdnID").val();
        }

    </script>
    <link rel="stylesheet" href="/assests/css/ftsNewScreen.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.5/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.5/js/plugins/sortable.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/5.1.5/js/fileinput.min.js"></script>
    @*<script src="http://malsup.github.com/jquery.form.js"></script>*@
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.js"></script>
    <script>
        $(document).ready(function () {
            // initialize with defaults
            $("#fileuploadicon").fileinput();

            // with plugin options
            $("#fileuploadicon").fileinput({ 'showUpload': false, 'previewFileType': 'any','browseLabel':'Browse' });

            $("#fileupload").fileinput();

            // with plugin options
            $("#fileupload").fileinput({ 'showUpload': false, 'previewFileType': 'any', 'browseLabel': 'Browse' });
        });

        $(function () {

            var bar = $('.bar');
            var percent = $('.percent');
            var status = $('#status');

            $('form').ajaxForm({
                beforeSend: function () {
                    status.empty();
                    var percentVal = '0%';
                    bar.width(percentVal);
                    percent.html(percentVal);
                },
                uploadProgress: function (event, position, total, percentComplete) {
                    var percentVal = percentComplete + '%';
                    bar.width(percentVal);
                    percent.html(percentVal);
                },
                complete: function (xhr) {
                    // status.html(xhr.responseText);

                    if (xhr.responseText != '') {
                        alertify.set('notifier', 'position', 'bottom-left');

                        if (JSON.parse(xhr.responseText) == 'File uploaded successfully.' || JSON.parse(xhr.responseText) == 'Updated succsessfully.')
                            jAlert(JSON.parse(xhr.responseText), 'success', function () { window.location.href = '/Myshop/DocumentSharing/UploadVideo'; });
                        else
                            var notification = alertify.error(JSON.parse(xhr.responseText));

                    }
                }
            });

            $('#fileuploadicon').bind('change', function (event) {
                $("#hdnFileDuration").val("");
                if (this.files[0].size > 1048576) {
                    alertify.set('notifier', 'position', 'bottom-left');

                    $('#fileuploadicon').fileinput('clear');
                    setTimeout(function () { $('#fileuploadicon').fileinput('refresh'); }, 1000);

                    var notification = alertify.notify('Maximum file size 1MB Supported', 'Alert', 3, function () {

                        $('#fileuploadicon').fileinput('enable');
                    });
                }

                //var allowedExtensions = new[] { ".pdf", ".ppt", ".pptx", ".mp4", ".doc", ".docx" };

                //var allowedExtensionsicon = new[] { ".jpg", ".jpeg", ".tif", ".png" };

                if (!event || !event.target || !event.target.files || event.target.files.length === 0) {
                    return;
                }

                const name = event.target.files[0].name;
                const lastDot = name.lastIndexOf('.');

                const fileName = name.substring(0, lastDot);
                const ext = name.substring(lastDot + 1);


                if (ext.toLowerCase() == "png" || ext.toLowerCase() == "gif" || ext.toLowerCase() == "jpeg" || ext.toLowerCase() == "tif") {

                }
                else
                {
                    alertify.set('notifier', 'position', 'bottom-left');
                    $('#fileuploadicon').fileinput('clear');
                    setTimeout(function () { $('#fileuploadicon').fileinput('refresh'); }, 1000);
                    var notification = alertify.notify('File type not Supported', 'Alert', 3, function () {
                        // $('#fileuploadicon').fileinput('refresh');
                        $('#fileuploadicon').fileinput('enable');
                    });
                }

            });

            $('#fileupload').bind('change', function ( event) {
                if (this.files[0].size > 20971520) {
                    alertify.set('notifier', 'position', 'bottom-left');

                    $('#fileupload').fileinput('clear');
                    setTimeout(function () { $('#fileupload').fileinput('refresh'); }, 1000);
                    var notification = alertify.notify('Maximum file size 20MB Supported', 'Alert', 3, function () {
                        //$('#fileupload').fileinput('refresh');
                        $('#fileupload').fileinput('enable');
                    });
                }

                //var allowedExtensions = new[] { ".pdf", ".ppt", ".pptx", ".mp4", ".doc", ".docx" };

                //var allowedExtensionsicon = new[] { ".jpg", ".jpeg", ".tif", ".png" };

                if (!event || !event.target || !event.target.files || event.target.files.length === 0) {
                    return;
                }

                const name = event.target.files[0].name;
                const lastDot = name.lastIndexOf('.');

                const fileName = name.substring(0, lastDot);
                const ext = name.substring(lastDot + 1);


                if (ext.toLowerCase() == "pdf" || ext.toLowerCase() == "ppt" || ext.toLowerCase() == "pptx" || ext.toLowerCase() == "mp4" || ext.toLowerCase() == "doc" || ext.toLowerCase() == "docx") {
                    if (ext.toLowerCase() == "mp4") {
                        var myVideos = [];
                        var files = this.files;
                        myVideos.push(files[0]);
                        var video = document.createElement('video');
                        video.preload = 'metadata';

                        video.onloadedmetadata = function () {
                            window.URL.revokeObjectURL(video.src);
                            var duration = video.duration;
                            $("#hdnFileDuration").val(duration);
                            //myVideos[myVideos.length - 1].duration = duration;
                            //updateInfos();
                        }
                        video.src = URL.createObjectURL(files[0]);
                    }
                }
                else
                {
                    alertify.set('notifier', 'position', 'bottom-left');
                    $('#fileupload').fileinput('clear');
                    setTimeout(function () { $('#fileupload').fileinput('refresh'); }, 1000);
                    var notification = alertify.notify('File type not Supported', 'Alert', 3, function () {
                        // $('#fileupload').fileinput('refresh');
                        $('#fileupload').fileinput('enable');
                    });
                }

            });


        });

        function getFile(filePath) {
            return filePath.substr(filePath.lastIndexOf('\\') + 1).split('.')[0];
        }

        $('form').on('submit', function () {


        });



    </script>
    <style>
        .progress {
            height: 10px;
            position: relative;
            overflow: auto;
            margin: 0;
        }

        .percent {
            position: absolute;
            top: -19px;
            right: 0;
        }

        .bar {
            height: 10px;
            background: green;
            width: 0%;
        }

        .file-drop-zone {
            margin: auto !important;
            min-height: 200px;
        }

        .krajee-default.file-preview-frame .kv-file-content {
            height: 125px !important;
        }

        .krajee-default .file-footer-caption {
            margin-bottom: 0;
        }

        .modal-dialog.modal-lg {
            left: 0;
        }

        video.kv-preview-data.file-preview-video.file-zoom-detail, .kv-preview-data.file-preview-video {
            height: auto !important;
        }

        .close.fileinput-remove {
            background: #ec4848;
            opacity: 1;
            color: #fff;
            font-size: 16px;
            width: 20px;
            height: 20px;
            /* margin: 2px 1px 0 0; */
            border-radius: 15px;
            margin: 9px 9px 0 5px;
        }

        .modal.w90 .modal-dialog {
            width: 90%;
        }

        .form-group {
            margin-bottom: 5px;
        }

        .doc-description {
            height: 59px !important;
            padding-bottom: 6px !important;
            overflow: hidden;
        }

        .mHeader {
            font-size: 31px;
            color: #4c4c4c;
            font-family: 'Poppins';
            background: #efefef;
            margin: 6px 0;
            border-radius: 5px;
            padding: 6px;
        }

        .modal-header {
            background: #094e8c !important;
            background-image: none !important;
            padding: 11px 20px;
            border: none;
            color: #fff;
        }

        button.close {
            color: #fff !important;
            font-weight: 400 !important;
            opacity: .8 !important;
            font-size: 26px !important;
        }
    </style>
</head>
<body>
    <div class="breadCumb">
        <span>Document List</span>
        <div class="crossBtnN"><a href="#" onclick="window.location.href = '/Myshop/DocumentSharing/Index'"><i class="fa fa-times"></i></a></div>
    </div>
    <div class="container">
        <div class="form_main backBox px-3 clearfix">
            <h1 class="text-center mHeader">@ViewBag.Group_Name</h1>
            <div class="row pt-3">
                <button style="margin-left: 27px; margin-bottom:10px;" type="button" onclick="AddDocument()" class="btn btn-success" data-toggle="modal" data-target="#UploadVideo">
                    <i class="fa fa-plus-circle"></i> Add New
                </button>
            </div>

            <div class="col-md-12">
                <div class="card">
                    <div class="card-header bg-danger text-white">

                    </div>
                    <div class="card-body">
                        <div class="row">
                            @foreach (var item in Model)
                            {
                                if (item.Filetype.ToUpper() == ".MP4")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="relative">
                                    <div class="title">@item.Name</div>
                                    <div class="video-frame">
                                        <div class="butHolder">
                                            <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                            <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                            <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>
                                        </div>
                                        <video style="width: 100%; height: 190px;" controls>
                                            <source src="@Url.Content(@item.FilePath)" type="video/mp4" />
                                        </video>

                                    </div>
                                    <div class="doc-description">@item.FileDescription</div>
                                </div>
                            </div>
                                }
                                else if (item.Filetype.ToUpper() == ".MP3")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>
                                    </div>
                                    <audio style="width: 100%; height: 190px;" controls="controls">
                                        <source src="@Url.Content(@item.FilePath)" type="audio/mpeg" />
                                    </audio>

                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }

                                else if (item.Filetype.ToUpper() == ".DOC" || item.Filetype.ToUpper() == ".DOCX")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <a href="@Url.Content(@item.FilePath)">
                                        <img src="~/assests/images/Word-Logo.png" alt="Download Excel" height="200" width="200" class="center" />
                                    </a>

                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }
                                else if (item.Filetype.ToUpper() == ".PPT" || item.Filetype.ToUpper() == ".PPTX")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <a href="@Url.Content(@item.FilePath)">
                                        <img src="~/assests/images/PowerPoint.png" alt="Download Excel" height="200" width="200" class="center" />
                                    </a>

                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }
                                else if (item.Filetype.ToUpper() == ".PDF")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <a href="@Url.Content(@item.FilePath)">
                                        <iframe src="@Url.Content(@item.FilePath)" style="width:100%"></iframe>
                                    </a>
                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }
                                else if (item.Filetype.ToUpper() == ".SQL" || item.Filetype.ToUpper() == ".TXT")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <object data="@Url.Content(@item.FilePath)" width="300" height="200"></object>
                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }

                                else if (item.Filetype.ToUpper() == ".XLS" || item.Filetype.ToUpper() == ".CSV" || item.Filetype.ToUpper() == ".XLSX")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <a href="@Url.Content(@item.FilePath)">
                                        <img src="~/assests/images/excel-logo.png" alt="Download Excel" height="200" width="200" class="center" />
                                    </a>

                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }
                                else if (item.Filetype.ToUpper() == ".JPG" || item.Filetype.ToUpper() == ".JPEG" || item.Filetype.ToUpper() == ".PNG")
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                    <a class='example-image-link' href="@Url.Content(@item.FilePath)" data-lightbox='example-1'>
                                        <img src="@Url.Content(@item.FilePath)" alt="Download Excel" height="180" width="250" class="center" />
                                    </a>

                                </div>
                                <div class="doc-description">@item.FileDescription</div>
                            </div>
                                }
                                else
                                {
                            <div class="col-sm-4 col-md-4 col-xs-12">
                                <div class="title">@item.Name</div>
                                <div class="video-frame">
                                    <div class="butHolder">
                                        <span onclick="editNode('@item.ID','@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)','@item.FileDescription','@item.IsActive')"><img src="~/assests/images/2edit.png" /> Edit</span>
                                        <span onclick="deleteNode('@item.ID', '@Url.Content(@item.FilePath)','@Url.Content(@item.FilePathIcon)')"><img src="~/assests/images/3button.png" />  Delete</span>
                                        <span onclick="addUserToNode('@item.ID', ' @Url.Content(@item.FilePath) ')"><img src="~/assests/images/1share.png" /> Share</span>

                                    </div>
                                </div>
                            </div>
                                }


                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>





    <div class="modal pmsModal fade w90" id="UploadVideo">
        <div class="modal-dialog">
            <div class="modal-content">
                @using (Html.BeginForm("UploadVideo", "DocumentSharing", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Upload New File</h4>
                </div>
                <div class="modal-body" style="padding: 12px;">

                    <div class="form-group hide">
                        <label>Name:</label>
                        <div class="custom-file">
                            <input type="text" id="FileName" name="FileName" class="form-control" />
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-8">
                            <div class="form-group">
                                <label>Description:</label>
                                <div class="custom-file">
                                    <input type="text" id="FileDescription" name="FileDescription" maxlength="250" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group" style="padding-top: 21px;">
                                <div class="custom-file">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" id="Active" value="true" name="Active"> Tick to mark Active
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Choose Icon File:</label>
                                <div class="clearfix">
                                    <div class="custom-file">
                                        <input type="file" id="fileuploadicon" name="fileuploadicon" class="custom-file-input" accept="image/*" />

                                    </div>
                                </div>
                            </div>
                            <p class="text-muted red" style="color:red">Supported types : JPEG,TIF,PNG and GIF (File size limited to 1MB)</p>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Choose File:</label>
                                <div class="clearfix">
                                    <div class="custom-file">
                                        <input type="file" id="fileupload" name="fileupload" class="custom-file-input" accept=".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.pdf,.pptx,.ppt,.mp4" />

                                    </div>
                                </div>
                            </div>
                            <p class="text-muted red" style="color:red">Supported types : PDF,DOC,DOCX,PPT,PPTX and MP4 (File size limited to 20MB)</p>
                        </div>

                    </div>

                    <div class="progress">
                        <div class="bar"></div>
                        <div class="percent">0%</div>
                    </div>

                    <div id="status"></div>
                    <input type="hidden" id="hdnAddEdit" name="hdnAddEdit" />
                    <input type="hidden" id="hdnFileDuration" name="hdnFileDuration" />


                </div>
                <div class="modal-footer">
                    <input type="submit" id="btnUpload" class="btn btn-info" value="Upload" />
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
                }
            </div>
        </div>
    </div>


    <div class="modal pmsModal fade" id="ShareVideo" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Share video</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="text-info" style="padding-bottom: 5px;">Tag Users</div>
                            <div class="dropdown-sin-2">
                                <select style="display:none" name="" id="" multiple placeholder="Select"><option value="" disabled selected>Select your option</option></select>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal">Save</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    @*<script type="text/javascript">
            // searchable multi
            var data = [{ "id": 1, "disabled": false, "groupName": "Group Name", "groupId": 4, "selected": false, "name": "Daniel Kenneth White" }, { "id": 2, "disabled": false, "groupName": "Group Name", "groupId": 2, "selected": false, "name": "Anthony Amy Hernandez" }, { "id": 3, "disabled": false, "groupName": "Group Name", "groupId": 2, "selected": false, "name": "Sarah Sandra Martin" }, { "id": 4, "disabled": false, "groupName": "Group Name", "groupId": 2, "selected": false, "name": "Jose Michael Thompson" }, { "id": 5, "disabled": false, "groupName": "Group Name", "groupId": 1, "selected": false, "name": "Shirley Kevin Garcia" }, { "id": 6, "disabled": false, "groupName": "Group Name", "groupId": 2, "selected": false, "name": "Kevin Sandra Jackson" }, { "id": 7, "disabled": false, "groupName": "Group Name", "groupId": 2, "selected": false, "name": "Sandra Kevin Hernandez" }, { "id": 8, "disabled": false, "groupName": "Group Name", "groupId": 4, "selected": false, "name": "Edward Donald Garcia" }]


            $('.dropdown-sin-2').dropdown({
                data: data,
                limitCount: 40,
                multipleMode: 'label',
                placeholder: 'Select Languages',
                choice: function () {
                    // console.log(arguments,this);
                }
            });
            $(".dropdown-sin-2").find("input[type='text']").attr("placeholder", "Select Users");
        </script>*@


    <div id="usermapModal" class="modal pmsModal  fade" data-backdrop="static" role="dialog">
        <div class="modal-dialog" style="width: 750px;">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">User Map</h4>
                </div>
                <div class="modal-body" style="width: auto">
                    <div id="divModalBody">
                        @{
                            Html.RenderAction("PartialUserGrid", "DocumentSharing", new { id = "0" });
                        }
                    </div>
                </div>
                <div class="modal-footer" style="width: auto">

                    <div>
                        <button type="button" id="btnSave" class="btn btn-success" onclick="SaveUserDocGroup()">Map User</button>
                    </div>

                </div>
            </div>

        </div>
        <input type="hidden" id="hdnID" />
    </div>

</body>
</html>
